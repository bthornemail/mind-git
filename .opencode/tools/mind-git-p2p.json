{
  "name": "mind-git-p2p",
  "description": "MQTT-based P2P real-time collaboration system for canvas synchronization",
  "version": "1.0.0",
  "type": "tool",
  "entry": "packages/mqtt-p2p/dist/index.js",
  "parameters": {
    "connect": {
      "type": "object",
      "properties": {
        "broker": {
          "type": "string",
          "description": "MQTT broker URL",
          "default": "mqtt://localhost:1883"
        },
        "repository": {
          "type": "string",
          "description": "Repository identifier for P2P network",
          "required": true
        },
        "peer": {
          "type": "string",
          "description": "Peer identifier",
          "required": true
        }
      },
      "required": ["repository", "peer"]
    },
    "sync": {
      "type": "object",
      "properties": {
        "canvas": {
          "type": "string",
          "description": "Canvas file to synchronize",
          "required": true
        },
        "mode": {
          "type": "string",
          "enum": ["real-time", "batch", "on-demand"],
          "description": "Synchronization mode",
          "default": "real-time"
        },
        "conflict": {
          "type": "string",
          "enum": ["last-writer-wins", "operational-transform", "crdt"],
          "description": "Conflict resolution strategy",
          "default": "operational-transform"
        }
      },
      "required": ["canvas"]
    },
    "broadcast": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "description": "Message to broadcast to peers",
          "required": true
        },
        "channel": {
          "type": "string",
          "description": "P2P channel for broadcast",
          "default": "mind-git/global"
        },
        "type": {
          "type": "string",
          "enum": ["canvas-update", "peer-join", "peer-leave", "heartbeat"],
          "description": "Message type",
          "default": "canvas-update"
        }
      },
      "required": ["message"]
    }
  },
  "commands": {
    "connect": "connect --broker {{broker}} --repository {{repository}} --peer {{peer}}",
    "sync": "sync {{canvas}} --mode {{mode}} --conflict {{conflict}}",
    "broadcast": "broadcast --message \"{{message}}\" --channel {{channel}} --type {{type}}"
  },
  "examples": [
    {
      "description": "Connect to P2P network",
      "command": "mind-git-p2p connect --repository my-canvas-project --peer alice"
    },
    {
      "description": "Start real-time canvas synchronization",
      "command": "mind-git-p2p sync examples/spatial-collaboration.canvas --mode real-time"
    }
  ],
  "dependencies": [
    "mqtt",
    "@mind-git/mqtt-p2p"
  ]
}